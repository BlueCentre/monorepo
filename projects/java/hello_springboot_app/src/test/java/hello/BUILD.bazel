load("@rules_java//java:defs.bzl", "java_test")

# Single consolidated test target. Add Spring Boot test + web + beans + hamcrest to satisfy strict deps.
java_test(
    name = "HelloControllerTest",
    timeout = "short",
    srcs = [
        "HelloControllerTest.java",
    ],
    test_class = "hello.HelloControllerTest",
    deps = [
        "//projects/java/hello_springboot_app/src/main/java/hello:lib",
    "@springboot//:org_springframework_boot_spring_boot_starter_test",  # Provides junit (vintage), spring-test, hamcrest, mockmvc
        "@springboot//:org_springframework_boot_spring_boot_starter_web",   # For MediaType (may be redundant, kept for strict deps clarity)
        "@springboot//:org_springframework_spring_beans",                  # strict deps bean wiring
        "@springboot//:org_springframework_spring_web",                    # strict deps web layer
        "@springboot//:org_springframework_boot_spring_boot_test",          # @SpringBootTest
        "@springboot//:org_springframework_boot_spring_boot_test_autoconfigure", # @AutoConfigureMockMvc
        "@springboot//:org_springframework_spring_test",                   # Test context classes (SpringRunner)
        "@springboot//:junit_junit",                                       # JUnit4 API for SpringRunner
        "@springboot//:org_hamcrest_hamcrest",                              # Matchers (assertThat)
    ],
)

# (Optional) An integration test could be re-added later using a different profile.
